// Material Design 3 Text Field (CSS Module)
// ==========================================
// Based on Angular Material M3 form-field and input SCSS
// @see m3-scss/material/form-field/form-field.scss
// @see m3-scss/material/form-field/_mdc-text-field-structure.scss

// Form field host element
.matFormField {
  // Maps to .mat-mdc-form-field
  --mat-mdc-form-field-floating-label-scale: 0.75;
  display: inline-flex;
  flex-direction: column;
  min-width: 0;
  text-align: left;
  font-family: var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));
  line-height: var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));
  font-size: var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));
  letter-spacing: var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));
  font-weight: var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight));
}

// Text field wrapper
.matTextFieldWrapper {
  // Maps to .mat-mdc-text-field-wrapper
  width: 100%;
  z-index: 0;
}

// Flex container for prefix, infix, suffix
.matFormFieldFlex {
  // Maps to .mat-mdc-form-field-flex
  display: inline-flex;
  align-items: baseline;
  box-sizing: border-box;
  width: 100%;
}

// The core text field container
.mdcTextField {
  // Maps to .mdc-text-field
  display: inline-flex;
  align-items: baseline;
  padding: 0 16px;
  position: relative;
  box-sizing: border-box;
  overflow: hidden;
  will-change: opacity, transform, color;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
}

// Outlined variant
.mdcTextFieldOutlined {
  // Maps to .mdc-text-field--outlined
  height: 56px;
  overflow: visible;
  padding-right: max(16px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));
  padding-left: max(16px, calc(var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px));
}

// Filled variant
.mdcTextFieldFilled {
  // Maps to .mdc-text-field--filled
  height: 56px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  border-top-left-radius: var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));
  border-top-right-radius: var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));
  background-color: var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant));
}

.mdcTextFieldFilled.mdcTextFieldDisabled {
  background-color: var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent));
}

// The actual input element
.mdcTextFieldInput {
  // Maps to .mdc-text-field__input
  width: 100%;
  min-width: 0;
  border: none;
  border-radius: 0;
  background: none;
  padding: 0;
  -moz-appearance: none;
  -webkit-appearance: none;
  height: 28px;

  &::-webkit-calendar-picker-indicator,
  &::-webkit-search-cancel-button {
    display: none;
  }

  &::-ms-clear {
    display: none;
  }

  &:focus {
    outline: none;
  }

  &:invalid {
    box-shadow: none;
  }

  &::placeholder {
    opacity: 0;
    transition: opacity 67ms cubic-bezier(0.4, 0, 0.2, 1);
  }
}

// Placeholder visibility states
.mdcTextFieldNoLabel .mdcTextFieldInput::placeholder,
.mdcTextFieldFocused .mdcTextFieldInput::placeholder {
  opacity: 1;
  transition-delay: 40ms;
  transition-duration: 110ms;
}

// Input colors for outlined variant
.mdcTextFieldOutlined:not(.mdcTextFieldDisabled) .mdcTextFieldInput {
  color: var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));
  caret-color: var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary));

  &::placeholder {
    color: var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant));
  }
}

// Input colors for filled variant
.mdcTextFieldFilled:not(.mdcTextFieldDisabled) .mdcTextFieldInput {
  color: var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));
  caret-color: var(--mat-form-field-filled-caret-color, var(--mat-sys-primary));

  &::placeholder {
    color: var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant));
  }
}

// Error state caret
.mdcTextFieldOutlined.mdcTextFieldInvalid:not(.mdcTextFieldDisabled) .mdcTextFieldInput {
  caret-color: var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error));
}

.mdcTextFieldFilled.mdcTextFieldInvalid:not(.mdcTextFieldDisabled) .mdcTextFieldInput {
  caret-color: var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error));
}

// Disabled input colors
.mdcTextFieldOutlined.mdcTextFieldDisabled .mdcTextFieldInput {
  color: var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));
}

.mdcTextFieldFilled.mdcTextFieldDisabled .mdcTextFieldInput {
  color: var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));
}

// Floating label
.mdcFloatingLabel {
  // Maps to .mdc-floating-label
  position: absolute;
  left: 0;
  transform-origin: left top;
  line-height: 1.15rem;
  text-align: left;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: text;
  overflow: hidden;
  will-change: transform;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1), color 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

// Label position in outlined
.mdcTextFieldOutlined .mdcFloatingLabel {
  left: 4px;
}

// Label position in filled
.mdcTextFieldFilled .mdcFloatingLabel {
  left: 16px;
}

// Label colors
.mdcTextFieldOutlined:not(.mdcTextFieldDisabled) .mdcFloatingLabel {
  color: var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant));
}

.mdcTextFieldOutlined:not(.mdcTextFieldDisabled).mdcTextFieldFocused .mdcFloatingLabel {
  color: var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary));
}

.mdcTextFieldOutlined:not(.mdcTextFieldDisabled):not(.mdcTextFieldFocused):hover .mdcFloatingLabel {
  color: var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface));
}

.mdcTextFieldOutlined.mdcTextFieldDisabled .mdcFloatingLabel {
  color: var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));
}

.mdcTextFieldOutlined:not(.mdcTextFieldDisabled).mdcTextFieldInvalid .mdcFloatingLabel {
  color: var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error));
}

.mdcTextFieldFilled:not(.mdcTextFieldDisabled) .mdcFloatingLabel {
  color: var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant));
}

.mdcTextFieldFilled:not(.mdcTextFieldDisabled).mdcTextFieldFocused .mdcFloatingLabel {
  color: var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary));
}

.mdcTextFieldFilled:not(.mdcTextFieldDisabled):not(.mdcTextFieldFocused):hover .mdcFloatingLabel {
  color: var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant));
}

.mdcTextFieldFilled.mdcTextFieldDisabled .mdcFloatingLabel {
  color: var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));
}

.mdcTextFieldFilled:not(.mdcTextFieldDisabled).mdcTextFieldInvalid .mdcFloatingLabel {
  color: var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error));
}

// Floating label in float-above state
.mdcFloatingLabelFloatAbove {
  // Maps to .mdc-floating-label--float-above
  cursor: auto;
  transform: translateY(-106%) scale(0.75);
}

.mdcTextFieldOutlined .mdcFloatingLabelFloatAbove {
  transform: translateY(-37.25px) scale(1);
  font-size: 0.75rem;
}

// Label typography
.mdcTextFieldOutlined .mdcFloatingLabel {
  font-family: var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));
  font-size: var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));
  font-weight: var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));
  letter-spacing: var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking));
}

.mdcTextFieldFilled .mdcFloatingLabel {
  font-family: var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));
  font-size: var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));
  font-weight: var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));
  letter-spacing: var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking));
}

// Notched outline (for outlined variant)
.mdcNotchedOutline {
  // Maps to .mdc-notched-outline
  display: flex;
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  max-width: 100%;
  height: 100%;
  text-align: left;
  pointer-events: none;
  z-index: 1;
}

// Notch piece (shared between leading, notch, trailing)
.matNotchPiece {
  // Maps to .mat-mdc-notch-piece
  box-sizing: border-box;
  height: 100%;
  pointer-events: none;
  border: none;
  border-top: 1px solid;
  border-bottom: 1px solid;
}

.mdcTextFieldFocused .matNotchPiece {
  border-width: 2px;
}

.mdcTextFieldOutlined:not(.mdcTextFieldDisabled) .matNotchPiece {
  border-color: var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));
  border-width: var(--mat-form-field-outlined-outline-width, 1px);
}

.mdcTextFieldOutlined:not(.mdcTextFieldDisabled):not(.mdcTextFieldFocused):hover .matNotchPiece {
  border-color: var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface));
}

.mdcTextFieldOutlined:not(.mdcTextFieldDisabled).mdcTextFieldFocused .matNotchPiece {
  border-color: var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary));
  border-width: var(--mat-form-field-outlined-focus-outline-width, 2px);
}

.mdcTextFieldOutlined.mdcTextFieldDisabled .matNotchPiece {
  border-color: var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent));
}

.mdcTextFieldOutlined:not(.mdcTextFieldDisabled).mdcTextFieldInvalid .matNotchPiece {
  border-color: var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error));
}

.mdcTextFieldOutlined:not(.mdcTextFieldDisabled).mdcTextFieldInvalid:not(.mdcTextFieldFocused):hover .matNotchPiece {
  border-color: var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container));
}

.mdcTextFieldOutlined:not(.mdcTextFieldDisabled).mdcTextFieldInvalid.mdcTextFieldFocused .matNotchPiece {
  border-color: var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error));
}

// Leading notch piece
.mdcNotchedOutlineLeading {
  // Maps to .mdc-notched-outline__leading
  border-left: 1px solid;
  border-right: none;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  border-top-left-radius: var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));
  border-bottom-left-radius: var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));
  width: max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));
}

// Trailing notch piece
.mdcNotchedOutlineTrailing {
  // Maps to .mdc-notched-outline__trailing
  flex-grow: 1;
  border-left: none;
  border-right: 1px solid;
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
  border-top-right-radius: var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));
  border-bottom-right-radius: var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));
}

// Notch (where the label sits)
.mdcNotchedOutlineNotch {
  // Maps to .mdc-notched-outline__notch
  flex: 0 0 auto;
  width: auto;
  max-width: calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2);
}

.mdcNotchedOutlineNotched .mdcNotchedOutlineNotch {
  padding-left: 0;
  padding-right: 8px;
  border-top: none;
}

// Line ripple (for filled variant)
.mdcLineRipple {
  // Maps to .mdc-line-ripple
  position: relative;

  &::before,
  &::after {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    border-bottom-style: solid;
    content: '';
  }

  &::before {
    z-index: 1;
    border-bottom-width: var(--mat-form-field-filled-active-indicator-height, 1px);
  }

  &::after {
    transform: scaleX(0);
    opacity: 0;
    z-index: 2;
    border-bottom-width: var(--mat-form-field-filled-focus-active-indicator-height, 2px);
    transition: transform 180ms cubic-bezier(0.4, 0, 0.2, 1), opacity 180ms cubic-bezier(0.4, 0, 0.2, 1);
  }
}

.mdcTextFieldFilled:not(.mdcTextFieldDisabled) .mdcLineRipple::before {
  border-bottom-color: var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant));
}

.mdcTextFieldFilled:not(.mdcTextFieldDisabled):not(.mdcTextFieldFocused):hover .mdcLineRipple::before {
  border-bottom-color: var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface));
}

.mdcTextFieldFilled.mdcTextFieldDisabled .mdcLineRipple::before {
  border-bottom-color: var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));
}

.mdcTextFieldFilled:not(.mdcTextFieldDisabled).mdcTextFieldInvalid .mdcLineRipple::before {
  border-bottom-color: var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error));
}

.mdcTextFieldFilled:not(.mdcTextFieldDisabled) .mdcLineRipple::after {
  border-bottom-color: var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary));
}

.mdcTextFieldFilled.mdcTextFieldInvalid:not(.mdcTextFieldDisabled) .mdcLineRipple::after {
  border-bottom-color: var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error));
}

// Active line ripple
.mdcLineRippleActive::after {
  transform: scaleX(1);
  opacity: 1;
}

// Infix (contains input)
.matFormFieldInfix {
  // Maps to .mat-mdc-form-field-infix
  flex: auto;
  min-width: 0;
  width: 180px;
  position: relative;
  box-sizing: border-box;
}

// Icon prefix/suffix
.matFormFieldIconPrefix,
.matFormFieldIconSuffix {
  // Maps to .mat-mdc-form-field-icon-prefix, .mat-mdc-form-field-icon-suffix
  align-self: center;
  line-height: 0;
  pointer-events: auto;
  position: relative;
  z-index: 1;
}

.matFormFieldIconPrefix {
  padding: 0 4px 0 0;
  color: var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant));
}

.matFormFieldIconSuffix {
  padding: 0 0 0 4px;
  color: var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant));
}

.mdcTextFieldDisabled .matFormFieldIconPrefix {
  color: var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));
}

.mdcTextFieldDisabled .matFormFieldIconSuffix {
  color: var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));
}

.mdcTextFieldInvalid .matFormFieldIconSuffix {
  color: var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error));
}

// Subscript wrapper (hints and errors)
.matFormFieldSubscriptWrapper {
  // Maps to .mat-mdc-form-field-subscript-wrapper
  box-sizing: border-box;
  width: 100%;
  position: relative;
  font-family: var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));
  line-height: var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));
  font-size: var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));
  letter-spacing: var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));
  font-weight: var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight));
}

.matFormFieldHintWrapper,
.matFormFieldErrorWrapper {
  // Maps to .mat-mdc-form-field-hint-wrapper, .mat-mdc-form-field-error-wrapper
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  padding: 0 16px;
  opacity: 1;
  transform: translateY(0);
  animation: matFormFieldSubscriptAnimation 0ms cubic-bezier(0.55, 0, 0.55, 0.2);
}

@keyframes matFormFieldSubscriptAnimation {
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Enable animation when animating
.matFormFieldAnimationsEnabled .matFormFieldHintWrapper,
.matFormFieldAnimationsEnabled .matFormFieldErrorWrapper {
  animation-duration: 300ms;
}

.matFormFieldError {
  // Maps to .mat-mdc-form-field-error
  display: block;
  color: var(--mat-form-field-error-text-color, var(--mat-sys-error));
}

// Bottom align (for consistent height)
.matFormFieldBottomAlign::before {
  content: '';
  display: inline-block;
  height: 16px;
}

// Disabled state
.mdcTextFieldDisabled {
  pointer-events: none;
}

// Density variants
.matFormFieldDensitySmall .mdcTextFieldOutlined,
.matFormFieldDensitySmall .mdcTextFieldFilled {
  height: 40px;
}

.matFormFieldDensitySmall .matFormFieldBottomAlign::before {
  height: 12px;
}

// Full width variant
.matFormFieldFullWidth {
  width: 100%;
}
