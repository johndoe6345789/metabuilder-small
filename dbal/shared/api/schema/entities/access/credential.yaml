entity: Credential
version: "1.0"
description: "Secure credential storage for user authentication"

fields:
  username:
    type: string
    primary: true
    description: "Associated username"

  passwordHash:
    type: string
    required: true
    sensitive: true
    description: "Hashed password (never returned in queries)"

  salt:
    type: string
    required: true
    sensitive: true
    description: "Random salt used for password hashing"

indexes:
  - fields: [username]
    unique: true

relations:
  user:
    type: belongs-to
    entity: User
    foreign_key: username
    on_delete: cascade
    on_update: cascade
    description: "Credential belongs to a user account"

acl:
  create:
    system: true
  read:
    system: true
  update:
    system: true
  delete:
    system: true

security:
  never_expose: [passwordHash]
  audit_all_access: true
