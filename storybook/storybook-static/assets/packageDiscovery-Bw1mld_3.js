async function _(){try{const e=await fetch("/packages-index.json");let a=[];return e.ok?a=(await e.json()).packages||[]:a=await p(),(await Promise.all(a.map(async s=>{try{return await d(s)}catch(n){return console.warn(`Failed to load package ${s}:`,n),null}}))).filter(s=>s!==null)}catch(e){return console.error("Package discovery failed:",e),[]}}async function d(e){const a=await fetch(`/packages/${e}/package.json`);if(!a.ok)throw new Error(`Failed to load package.json for ${e}`);const t=await a.json();let s,n=!1;try{const o=await fetch(`/packages/${e}/components/ui.json`);o.ok&&(s=(await o.json()).components||[],n=s.length>0)}catch{}let i,r=!1;try{const o=await fetch(`/packages/${e}/permissions/roles.json`);o.ok&&(i=(await o.json()).permissions||[],r=i.length>0)}catch{}let c=!1;try{c=(await fetch(`/packages/${e}/styles/index.json`)).ok}catch{}const l=!!(t.storybook&&!t.storybook.excludeFromDiscovery);return{id:e,metadata:t,hasComponents:n,hasPermissions:r,hasStyles:c,hasStorybook:l,components:s,permissions:i}}async function p(){return m()}function m(){return["admin_dialog","arcade_lobby","audit_log","code_editor","codegen_studio","config_summary","css_designer","dashboard","data_table","dbal_demo","form_builder","forum_forge","github_tools","irc_webchat","json_script_example","testing","media_center","nav_menu","notification_center","package_validator","quick_guide","role_editor","schema_editor","screenshot_analyzer","smtp_config","social_hub","stats_grid","stream_cast","ui_auth","ui_dialogs","ui_footer","ui_header","ui_home","ui_intro","ui_level2","ui_level3","ui_level4","ui_level5","ui_level6","ui_login","ui_pages","ui_permissions","user_manager","workflow_editor"]}async function g(){return(await _()).filter(a=>a.hasStyles).map(a=>a.id)}export{g as a,_ as d};
