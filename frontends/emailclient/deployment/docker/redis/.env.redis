# Phase 8: Redis Environment Variables
# Email Client Implementation - Cache & Celery Broker Configuration

# ============================================================================
# REDIS AUTHENTICATION
# ============================================================================

# Redis password (strong password recommended for production)
# IMPORTANT: Change this to a strong, random password in production
REDIS_PASSWORD=redis_development_password

# ============================================================================
# REDIS MEMORY CONFIGURATION
# ============================================================================

# Maximum memory Redis can use (e.g., 512mb, 1gb, etc.)
# Default: 512mb (suitable for email client)
REDIS_MAXMEMORY=512mb

# Memory eviction policy when max memory is reached
# Options: allkeys-lru, volatile-lru, allkeys-lfu, volatile-lfu, allkeys-random,
#          volatile-random, volatile-ttl, noeviction
# Default: allkeys-lru (remove any key using LRU)
REDIS_MAXMEMORY_POLICY=allkeys-lru

# ============================================================================
# REDIS PERSISTENCE
# ============================================================================

# Enable RDB snapshots (backup full database periodically)
# Default: yes
REDIS_RDB_ENABLED=yes

# Enable AOF (Append-Only File) for point-in-time recovery
# Default: yes
REDIS_AOF_ENABLED=yes

# ============================================================================
# CELERY BROKER CONFIGURATION
# ============================================================================

# Celery broker URL (format: redis://[password@]host:port/db)
# db 0: Tasks and results
# db 1: Job metadata (optional)
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/0

# Celery result backend
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@redis:6379/0

# Celery task serialization format (json, pickle, msgpack)
CELERY_TASK_SERIALIZER=json

# ============================================================================
# CELERY TASK CONFIGURATION
# ============================================================================

# Task execution timeout (seconds)
CELERY_TASK_TIME_LIMIT=3600

# Task soft timeout (seconds)
CELERY_TASK_SOFT_TIME_LIMIT=3000

# Celery worker concurrency (number of worker processes)
CELERY_WORKER_CONCURRENCY=4

# Enable task compression (for large tasks)
CELERY_TASK_COMPRESSION=gzip

# Result expiration (seconds) - 24 hours
CELERY_RESULT_EXPIRES=86400

# ============================================================================
# EMAIL SERVICE INTEGRATION
# ============================================================================

# Redis connection pool size
REDIS_CONNECTION_POOL_SIZE=10

# Redis socket timeout (seconds)
REDIS_SOCKET_TIMEOUT=5

# Redis socket connection timeout (seconds)
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ============================================================================
# DEVELOPMENT/DEBUGGING
# ============================================================================

# Enable Redis debug mode (development only)
REDIS_DEBUG=false

# Enable verbose logging (development only)
REDIS_VERBOSE=false
