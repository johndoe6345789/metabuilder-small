# Dovecot IMAP/POP3 Server - Environment Configuration
# Phase 8: Email Client Implementation

##
## Basic Configuration
##

# Dovecot server hostname (used in logs and mail server identification)
DOVECOT_HOSTNAME=emailclient.local

# Enable debug logging (true/false)
DOVECOT_DEBUG=false

##
## Authentication Backend
##

# Authentication backend: 'static', 'ldap', or 'sql'
DOVECOT_AUTH_BACKEND=static

# For LDAP backend:
# LDAP server URI
LDAP_URI=ldap://ldap.example.com:389

# LDAP base distinguished name
LDAP_BASE_DN=dc=example,dc=com

# LDAP bind DN (for authenticated queries)
LDAP_BIND_DN=cn=admin,dc=example,dc=com

# LDAP bind password
LDAP_BIND_PASSWORD=secret

# LDAP TLS mode: 'start_tls' or 'tls'
LDAP_TLS=start_tls

# LDAP certificate verification: 'demand', 'allow', 'try', or 'never'
LDAP_TLS_VERIFY=demand

# LDAP debug logging
LDAP_DEBUG=no

##
## Virtual Users (Development Only)
##

# Comma-separated list of virtual users (format: user@domain:hashed_password:uid:gid)
# Generate hash with: doveadm pw -s SHA512-CRYPT -p "password"
# DOVECOT_USERS=demo@localhost:{SHA512-CRYPT}$6$...:1000:1000:/var/mail/demo@localhost:/sbin/nologin::

##
## Mail Storage Configuration
##

# Maximum mailbox size (bytes) - 0 for unlimited
DOVECOT_MAX_MESSAGE_SIZE=102400000

# Mail storage location (typically in mounted volume)
DOVECOT_MAIL_HOME=/var/mail

##
## TLS/SSL Certificate Configuration
##

# Path to TLS certificate (usually mounted from volume)
# DOVECOT_SSL_CERT=/etc/dovecot/certs/dovecot.crt

# Path to TLS private key (usually mounted from volume)
# DOVECOT_SSL_KEY=/etc/dovecot/private/dovecot.key

# TLS protocols to enable (space-separated)
# DOVECOT_SSL_PROTOCOLS=TLSv1.2 TLSv1.3

# TLS cipher suites
# DOVECOT_SSL_CIPHERS=HIGH:!aNULL:!MD5:!eNULL:!EXP:!PSK:!SRP:!DSS

##
## Protocol Settings
##

# Enable IMAP protocol (true/false)
DOVECOT_ENABLE_IMAP=true

# Enable POP3 protocol (true/false)
DOVECOT_ENABLE_POP3=true

# Enable LMTP protocol (true/false)
DOVECOT_ENABLE_LMTP=true

# IMAP idle notification interval (e.g., "5 mins", "2 mins")
DOVECOT_IMAP_IDLE_NOTIFY=5 mins

# POP3 UIDL format
DOVECOT_POP3_UIDL_FORMAT=%08Xu%08Xv

##
## Performance Tuning
##

# IMAP process limit
DOVECOT_IMAP_PROCESS_LIMIT=512

# POP3 process limit
DOVECOT_POP3_PROCESS_LIMIT=512

# Minimum available processes
DOVECOT_PROCESS_MIN_AVAIL=2

# Maximum worker processes
DOVECOT_MAX_WORKER_PROCESSES=512

# Per-IP connection limit
DOVECOT_MAX_USERIP_CONNECTIONS=20

##
## Postfix Integration
##

# Postfix will deliver mail via LMTP socket at:
# /var/spool/postfix/private/dovecot-lmtp

# Ensure Postfix main.cf contains:
# virtual_transport = lmtp:unix:private/dovecot-lmtp

##
## Monitoring & Logging
##

# Enable mail logging plugin (tracks deletions, copies, etc.)
DOVECOT_ENABLE_MAIL_LOG=true

# Enable stats plugin for monitoring
DOVECOT_ENABLE_STATS=true

# Log authentication attempts
DOVECOT_AUTH_VERBOSE=true

# Log mail operations
DOVECOT_MAIL_DEBUG=false

# Log SSL/TLS operations
DOVECOT_SSL_VERBOSE=false

##
## Development/Testing
##

# Allow plaintext auth (disable in production!)
# DOVECOT_DISABLE_PLAINTEXT_AUTH=no

# Skip user database checks (development only)
# DOVECOT_SKIP_USERDB_CHECK=yes

# Raw IMAP log directory (debug only)
# DOVECOT_IMAP_RAW_LOG_DIR=/var/log/dovecot

# Raw POP3 log directory (debug only)
# DOVECOT_POP3_RAW_LOG_DIR=/var/log/dovecot
