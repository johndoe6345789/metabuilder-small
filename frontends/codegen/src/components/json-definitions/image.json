{
  "id": "image-container",
  "type": "div",
  "bindings": {
    "className": {
      "source": "className",
      "transform": "data ? `image-container ${data}` : 'image-container'"
    },
    "style": {
      "source": ["width", "height"],
      "transform": "const width = data[0]; const height = data[1]; return { width: typeof width === 'number' ? `${width}px` : width, height: typeof height === 'number' ? `${height}px` : height }"
    }
  },
  "children": [
    {
      "id": "image-loading",
      "type": "div",
      "bindings": {
        "className": {
          "source": null,
          "transform": "'image-container__loading-overlay'"
        },
        "_if": {
          "source": "imageState.loading",
          "transform": "data"
        }
      }
    },
    {
      "id": "image-element",
      "type": "img",
      "bindings": {
        "src": {
          "source": ["imageState.error", "fallback", "src"],
          "transform": "const error = data[0]; const fallback = data[1]; const src = data[2]; return (error && fallback) ? fallback : src"
        },
        "alt": {
          "source": "alt",
          "transform": "data"
        },
        "onLoad": {
          "source": "imageState.handleLoad",
          "transform": "data"
        },
        "onError": {
          "source": "imageState.handleError",
          "transform": "data"
        },
        "className": {
          "source": ["imageState.loading", "fit"],
          "transform": "const loading = data[0]; const fit = data[1] || 'cover'; const stateClass = loading ? 'image-container__element--loading' : 'image-container__element--loaded'; const fitClass = fit !== 'cover' ? `image-container__element--${fit}` : ''; return ['image-container__element', stateClass, fitClass].filter(Boolean).join(' ')"
        }
      }
    }
  ]
}
