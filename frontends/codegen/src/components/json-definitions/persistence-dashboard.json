{
  "id": "persistence-dashboard-container",
  "type": "div",
  "props": { "className": "p-6 space-y-6" },
  "children": [
    {
      "id": "dashboard-header",
      "type": "div",
      "props": { "className": "flex items-center justify-between" },
      "children": [
        {
          "id": "dashboard-title",
          "type": "h1",
          "props": { "className": "text-3xl font-bold" },
          "children": [
            {
              "type": "text",
              "bindings": { "children": "viewData.copy.title" }
            }
          ]
        },
        {
          "id": "status-badge",
          "type": "Badge",
          "bindings": {
            "className": "viewData.statusBadgeClassName"
          },
          "children": [
            {
              "type": "text",
              "bindings": { "children": "viewData.statusText" }
            }
          ]
        }
      ]
    },
    {
      "id": "cards-grid",
      "type": "div",
      "props": { "className": "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" },
      "children": [
        {
          "id": "connection-status-card",
          "type": "Card",
          "props": { "className": "p-6 space-y-4 border-sidebar-border hover:bg-muted/50 transition-colors" },
          "children": [
            {
              "id": "connection-header",
              "type": "div",
              "props": { "className": "flex items-center justify-between" },
              "children": [
                {
                  "id": "connection-title",
                  "type": "h3",
                  "props": { "className": "text-lg font-semibold flex items-center gap-2" },
                  "children": [
                    {
                      "type": "Database",
                      "props": { "className": "text-primary" }
                    },
                    {
                      "type": "text",
                      "bindings": { "children": "viewData.copy.cards.connection.title" }
                    }
                  ]
                },
                {
                  "id": "connection-icon-connected",
                  "type": "CheckCircle",
                  "conditional": { "if": "viewData.flags.isConnected" },
                  "props": { "className": "text-accent", "weight": "fill" }
                },
                {
                  "id": "connection-icon-disconnected",
                  "type": "XCircle",
                  "conditional": { "if": "!viewData.flags.isConnected" },
                  "props": { "className": "text-destructive", "weight": "fill" }
                }
              ]
            },
            {
              "id": "connection-separator",
              "type": "Separator"
            },
            {
              "id": "connection-details",
              "type": "div",
              "props": { "className": "space-y-2" },
              "children": [
                {
                  "id": "local-storage-row",
                  "type": "div",
                  "props": { "className": "flex justify-between text-sm" },
                  "children": [
                    {
                      "type": "span",
                      "props": { "className": "text-muted-foreground" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.connection.localStorageLabel" }
                        }
                      ]
                    },
                    {
                      "type": "span",
                      "props": { "className": "font-medium" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.connection.localStorageValue" }
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "remote-storage-row",
                  "type": "div",
                  "props": { "className": "flex justify-between text-sm" },
                  "children": [
                    {
                      "type": "span",
                      "props": { "className": "text-muted-foreground" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.connection.remoteStorageLabel" }
                        }
                      ]
                    },
                    {
                      "type": "span",
                      "props": { "className": "font-medium" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.remoteStorageText" }
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "last-sync-row",
                  "type": "div",
                  "props": { "className": "flex justify-between text-sm" },
                  "children": [
                    {
                      "type": "span",
                      "props": { "className": "text-muted-foreground" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.connection.lastSyncLabel" }
                        }
                      ]
                    },
                    {
                      "type": "span",
                      "props": { "className": "font-medium" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.lastSyncFormatted" }
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "id": "sync-metrics-card",
          "type": "Card",
          "props": { "className": "p-6 space-y-4 border-sidebar-border hover:bg-muted/50 transition-colors" },
          "children": [
            {
              "id": "metrics-header",
              "type": "div",
              "props": { "className": "flex items-center justify-between" },
              "children": [
                {
                  "id": "metrics-title",
                  "type": "h3",
                  "props": { "className": "text-lg font-semibold flex items-center gap-2" },
                  "children": [
                    {
                      "type": "ChartLine",
                      "props": { "className": "text-accent" }
                    },
                    {
                      "type": "text",
                      "bindings": { "children": "viewData.copy.cards.metrics.title" }
                    }
                  ]
                },
                {
                  "type": "Speed",
                  "props": { "className": "text-muted-foreground" }
                }
              ]
            },
            {
              "id": "metrics-separator",
              "type": "Separator"
            },
            {
              "id": "metrics-details",
              "type": "div",
              "props": { "className": "space-y-2" },
              "children": [
                {
                  "id": "total-ops-row",
                  "type": "div",
                  "props": { "className": "flex justify-between text-sm" },
                  "children": [
                    {
                      "type": "span",
                      "props": { "className": "text-muted-foreground" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.metrics.totalOperationsLabel" }
                        }
                      ]
                    },
                    {
                      "type": "span",
                      "props": { "className": "font-medium" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.metrics.totalOperations" }
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "success-rate-row",
                  "type": "div",
                  "props": { "className": "flex justify-between text-sm" },
                  "children": [
                    {
                      "type": "span",
                      "props": { "className": "text-muted-foreground" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.metrics.successRateLabel" }
                        }
                      ]
                    },
                    {
                      "type": "span",
                      "props": { "className": "font-medium text-accent" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": {
                            "children": {
                              "source": "viewData.successRate",
                              "transform": "data + '%'"
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "avg-duration-row",
                  "type": "div",
                  "props": { "className": "flex justify-between text-sm" },
                  "children": [
                    {
                      "type": "span",
                      "props": { "className": "text-muted-foreground" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.metrics.avgDurationLabel" }
                        }
                      ]
                    },
                    {
                      "type": "span",
                      "props": { "className": "font-medium" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.avgDurationFormatted" }
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "failed-ops-row",
                  "type": "div",
                  "props": { "className": "flex justify-between text-sm" },
                  "children": [
                    {
                      "type": "span",
                      "props": { "className": "text-muted-foreground" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.metrics.failedLabel" }
                        }
                      ]
                    },
                    {
                      "type": "span",
                      "props": { "className": "font-medium text-destructive" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.metrics.failedOperations" }
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "id": "auto-sync-card",
          "type": "Card",
          "props": { "className": "p-6 space-y-4 border-sidebar-border hover:bg-muted/50 transition-colors" },
          "children": [
            {
              "id": "auto-sync-header",
              "type": "div",
              "props": { "className": "flex items-center justify-between" },
              "children": [
                {
                  "id": "auto-sync-title",
                  "type": "h3",
                  "props": { "className": "text-lg font-semibold flex items-center gap-2" },
                  "children": [
                    {
                      "type": "Clock",
                      "props": { "className": "text-amber-500" }
                    },
                    {
                      "type": "text",
                      "bindings": { "children": "viewData.copy.cards.autoSync.title" }
                    }
                  ]
                },
                {
                  "id": "auto-sync-switch",
                  "type": "Switch",
                  "bindings": {
                    "checked": "viewData.autoSyncEnabled",
                    "onChange": "viewData.handlers.handleAutoSyncToggle"
                  }
                }
              ]
            },
            {
              "id": "auto-sync-separator",
              "type": "Separator"
            },
            {
              "id": "auto-sync-details",
              "type": "div",
              "props": { "className": "space-y-2" },
              "children": [
                {
                  "id": "auto-sync-status-row",
                  "type": "div",
                  "props": { "className": "flex justify-between text-sm" },
                  "children": [
                    {
                      "type": "span",
                      "props": { "className": "text-muted-foreground" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.autoSync.statusLabel" }
                        }
                      ]
                    },
                    {
                      "type": "span",
                      "props": { "className": "font-medium" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.autoSyncStatusText" }
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "changes-pending-row",
                  "type": "div",
                  "props": { "className": "flex justify-between text-sm" },
                  "children": [
                    {
                      "type": "span",
                      "props": { "className": "text-muted-foreground" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.autoSync.changesPendingLabel" }
                        }
                      ]
                    },
                    {
                      "type": "span",
                      "props": { "className": "font-medium" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.autoSyncStatus.changeCounter" }
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "next-sync-row",
                  "type": "div",
                  "props": { "className": "flex justify-between text-sm" },
                  "children": [
                    {
                      "type": "span",
                      "props": { "className": "text-muted-foreground" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.copy.cards.autoSync.nextSyncLabel" }
                        }
                      ]
                    },
                    {
                      "type": "span",
                      "props": { "className": "font-medium" },
                      "children": [
                        {
                          "type": "text",
                          "bindings": { "children": "viewData.nextSyncFormatted" }
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "manual-sync-card",
      "type": "Card",
      "props": { "className": "p-6 space-y-4 border-sidebar-border" },
      "children": [
        {
          "id": "manual-sync-title",
          "type": "h3",
          "props": { "className": "text-lg font-semibold flex items-center gap-2" },
          "children": [
            {
              "type": "ArrowsClockwise",
              "props": { "className": "text-primary" }
            },
            {
              "type": "text",
              "bindings": { "children": "viewData.copy.cards.manualSync.title" }
            }
          ]
        },
        {
          "id": "manual-sync-separator",
          "type": "Separator"
        },
        {
          "id": "manual-sync-buttons",
          "type": "div",
          "props": { "className": "flex flex-wrap gap-3" },
          "children": [
            {
              "id": "push-button",
              "type": "Button",
              "bindings": {
                "onClick": "viewData.handlers.handleSyncToFlask",
                "disabled": {
                  "source": "viewData.flags.canSyncToFlask",
                  "transform": "!data"
                }
              },
              "props": { "className": "flex items-center gap-2" },
              "children": [
                { "type": "CloudArrowUp" },
                {
                  "type": "text",
                  "bindings": { "children": "viewData.copy.cards.manualSync.pushButton" }
                }
              ]
            },
            {
              "id": "pull-button",
              "type": "Button",
              "bindings": {
                "onClick": "viewData.handlers.handleSyncFromFlask",
                "disabled": {
                  "source": "viewData.flags.canSyncFromFlask",
                  "transform": "!data"
                }
              },
              "props": { "variant": "outline", "className": "flex items-center gap-2" },
              "children": [
                { "type": "CloudArrowDown" },
                {
                  "type": "text",
                  "bindings": { "children": "viewData.copy.cards.manualSync.pullButton" }
                }
              ]
            },
            {
              "id": "trigger-button",
              "type": "Button",
              "bindings": {
                "onClick": "viewData.handlers.handleManualSync",
                "disabled": {
                  "source": "viewData.flags.canTriggerManualSync",
                  "transform": "!data"
                }
              },
              "props": { "variant": "outline", "className": "flex items-center gap-2" },
              "children": [
                { "type": "ArrowsClockwise" },
                {
                  "type": "text",
                  "bindings": { "children": "viewData.copy.cards.manualSync.triggerButton" }
                }
              ]
            },
            {
              "id": "check-connection-button",
              "type": "Button",
              "bindings": {
                "onClick": "viewData.handlers.handleCheckConnection"
              },
              "props": { "variant": "outline", "className": "flex items-center gap-2" },
              "children": [
                { "type": "CheckCircle" },
                {
                  "type": "text",
                  "bindings": { "children": "viewData.copy.cards.manualSync.checkButton" }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "error-card",
      "type": "Card",
      "conditional": {
        "if": "viewData.flags.hasError && viewData.status.error"
      },
      "props": { "className": "p-6 border-destructive bg-destructive/10" },
      "children": [
        {
          "id": "error-content",
          "type": "div",
          "props": { "className": "flex items-start gap-3" },
          "children": [
            {
              "type": "XCircle",
              "props": { "className": "text-destructive mt-1", "weight": "fill" }
            },
            {
              "id": "error-text-container",
              "type": "div",
              "children": [
                {
                  "id": "error-title",
                  "type": "h3",
                  "props": { "className": "font-semibold text-destructive mb-1" },
                  "children": [
                    {
                      "type": "text",
                      "bindings": { "children": "viewData.copy.cards.error.title" }
                    }
                  ]
                },
                {
                  "id": "error-message",
                  "type": "p",
                  "props": { "className": "text-sm text-muted-foreground" },
                  "children": [
                    {
                      "type": "text",
                      "bindings": { "children": "viewData.status.error" }
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "how-it-works-card",
      "type": "Card",
      "props": { "className": "p-6 space-y-4 border-sidebar-border" },
      "children": [
        {
          "id": "how-it-works-title",
          "type": "h3",
          "props": { "className": "text-lg font-semibold" },
          "children": [
            {
              "type": "text",
              "bindings": { "children": "viewData.copy.cards.howItWorks.title" }
            }
          ]
        },
        {
          "id": "how-it-works-separator",
          "type": "Separator"
        },
        {
          "id": "how-it-works-items",
          "type": "div",
          "props": { "className": "space-y-3 text-sm text-muted-foreground" },
          "children": [
            {
              "id": "how-item-0",
              "type": "p",
              "children": [
                {
                  "type": "strong",
                  "props": { "className": "text-foreground" },
                  "children": [
                    {
                      "type": "text",
                      "bindings": { "children": "viewData.copy.cards.howItWorks.items[0].title" }
                    }
                  ]
                },
                {
                  "type": "text",
                  "bindings": {
                    "children": {
                      "source": "viewData.copy.cards.howItWorks.items[0].description",
                      "transform": "' ' + data"
                    }
                  }
                }
              ]
            },
            {
              "id": "how-item-1",
              "type": "p",
              "children": [
                {
                  "type": "strong",
                  "props": { "className": "text-foreground" },
                  "children": [
                    {
                      "type": "text",
                      "bindings": { "children": "viewData.copy.cards.howItWorks.items[1].title" }
                    }
                  ]
                },
                {
                  "type": "text",
                  "bindings": {
                    "children": {
                      "source": "viewData.copy.cards.howItWorks.items[1].description",
                      "transform": "' ' + data"
                    }
                  }
                }
              ]
            },
            {
              "id": "how-item-2",
              "type": "p",
              "children": [
                {
                  "type": "strong",
                  "props": { "className": "text-foreground" },
                  "children": [
                    {
                      "type": "text",
                      "bindings": { "children": "viewData.copy.cards.howItWorks.items[2].title" }
                    }
                  ]
                },
                {
                  "type": "text",
                  "bindings": {
                    "children": {
                      "source": "viewData.copy.cards.howItWorks.items[2].description",
                      "transform": "' ' + data"
                    }
                  }
                }
              ]
            },
            {
              "id": "how-item-3",
              "type": "p",
              "children": [
                {
                  "type": "strong",
                  "props": { "className": "text-foreground" },
                  "children": [
                    {
                      "type": "text",
                      "bindings": { "children": "viewData.copy.cards.howItWorks.items[3].title" }
                    }
                  ]
                },
                {
                  "type": "text",
                  "bindings": {
                    "children": {
                      "source": "viewData.copy.cards.howItWorks.items[3].description",
                      "transform": "' ' + data"
                    }
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
